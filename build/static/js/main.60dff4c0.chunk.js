(this["webpackJsonpalgorand-style-transfer"]=this["webpackJsonpalgorand-style-transfer"]||[]).push([[0],{117:function(e,t,a){},118:function(e,t,a){},163:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),s=a(11),r=a.n(s),o=(a(117),a(118),a(70)),l=a(13),c=a.n(l),d=a(22),p=a(37),h=a(38),u=a(12),m=a(40),g=a(39),b=a(226),y=a(214),f=a(216),x=a(59),j=a(105),v=a(55),I=a.n(v),O=a(102),S=a(166),T=a(167),w=a(60),C=a(101),k=window.AlgoSigner;function M(){return U.apply(this,arguments)}function U(){return(U=Object(d.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,!k){e.next=12;break}return e.prev=2,e.next=5,k.connect().then((function(e){t=!0})).catch((function(e){console.error(e)}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:e.next=13;break;case 12:console.error("AlgoSigner not installed!");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function D(){return R.apply(this,arguments)}function R(){return(R=Object(d.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,k.accounts({ledger:"TestNet"}).then((function(e){t=e})).catch((function(e){console.error(e)}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return z.apply(this,arguments)}function z(){return(z=Object(d.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,k.algod({ledger:"TestNet",path:"/v2/transactions/params"}).then((function(e){t=e})).catch((function(e){console.error(e)}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return F.apply(this,arguments)}function F(){return(F=Object(d.a)(c.a.mark((function e(t){var a,i,n,s,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},i=t.from,n=t.to,s=t.amount,r=t.note,e.next=4,H();case 4:if(!(o=e.sent)){e.next=8;break}return e.next=8,k.sign({from:i,to:n,amount:s,note:r,type:"pay",fee:o["min-fee"],firstRound:o["last-round"],lastRound:o["last-round"]+1e3,genesisID:o["genesis-id"],genesisHash:o["genesis-hash"],flatFee:!0}).then((function(e){a=e})).catch((function(e){console.error(e)}));case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return L.apply(this,arguments)}function L(){return(L=Object(d.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,k.send({ledger:"TestNet",tx:t.blob}).then((function(e){a=e})).catch((function(e){console.error(e)}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return W.apply(this,arguments)}function W(){return(W=Object(d.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,k.algod({ledger:"TestNet",path:"/v2/transactions/pending/"+t.txId}).then((function(e){a=e})).catch((function(e){console.error(e)}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=a(87),P=a.n(N),G="https://algorand.nonsense.codes:7000",X="SUPERsecret#2021";function _(e,t){return V.apply(this,arguments)}function V(){return(V=Object(d.a)(c.a.mark((function e(t,a){var i,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={content:t,style:a},e.next=3,P.a.post("".concat(G,"/style-transfer"),i,{headers:{Authorization:X}});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=a(209),K=a(229),Q=a(57),Y=a(2),Z=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={hover:!1},i.renderIconButton=i.renderIconButton.bind(Object(u.a)(i)),i}return Object(h.a)(a,[{key:"renderIconButton",value:function(){var e=this.props.children;return Object(Y.jsx)(J.a,{onMouseEnter:function(){this.setState({hover:!0})}.bind(this),onMouseLeave:function(){this.setState({hover:!1})}.bind(this),style:this.state.hover?{color:this.props.onColor}:{color:this.props.offColor},target:"_blank",href:this.props.href,children:e})}},{key:"render",value:function(){return this.props.text?Object(Y.jsx)(K.a,{title:Object(Y.jsx)(S.a,{style:{fontFamily:this.props.fontFamily,fontSize:this.props.fontSize,color:this.props.textColor},children:this.props.text}),children:this.renderIconButton()}):this.renderIconButton()}}]),a}(n.a.Component);Z.defaultProps={text:null,fontFamily:"Muli",fontSize:14,textColor:"white",onColor:x.a[500],offColor:Q.a[600]};var q=a(99),$=a.n(q),ee=a(97),te=a.n(ee),ae=a(215),ie=a(100),ne=a.n(ie),se=a(98),re=a.n(se),oe=a(221),le=a(220),ce=a(165),de=a(224),pe=a(58),he=a(94),ue=a.n(he),me=a(228),ge=a(225),be=a(95),ye=a(227),fe=a(217),xe=a(96),je=a.n(xe),ve=a(218),Ie=a(219),Oe=a(222),Se=a(223),Te=a(169),we=a(168),Ce=Q.a[700],ke=Q.a[500],Me=Q.a[100],Ue=pe.a[500],De=pe.a[100],Re="Muli",He=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).tabHeight=Math.max(160,i.props.tabHeight),i.dropzoneHeightOffset=14,i.state={mainState:i.props.outputImage?"display":"initial",value:i.props.outputImage?i.props.disableOutputTab?i.props.disableComparisonTab?3:5:4:i.props.disableUploadTab?i.props.disableUploadTab+i.props.disableUrlTab:0,searchText:null,errorMessage:null,displayError:!1,displayImageName:!1,inputImageData:null,mimeType:null,encoding:null,filename:null,base64Reader:void 0,byteReader:void 0,imageXPosition:void 0,dividerXPosition:i.props.width/2,displayModeTitle:i.props.displayModeTitle,outputImage:i.props.outputImage&&a.prepareBase64Image(i.props.outputImage),outputImageName:i.props.outputImageName},i.tabStyle={position:"relative",overflow:"hidden",height:i.tabHeight+"px"},i.tabLabelStyle={fontFamily:Re,fontVariantCaps:"normal",textTransform:"initial",fontSize:14},i.mainColor=i.props.mainColor[500],i.theme=Object(O.a)({palette:{primary:i.props.mainColor,error:pe.a},typography:{useNextVariants:!0}}),i.urlErrorMessage="Incorrect URL or permission denied by server.",i.fileSizeError="File size exceeds limits ("+i.props.maxImageSize/1e6+"mb).",i.fileTypeError="File type not accepted. Allowed: "+i.props.allowedInputTypes+".",i.inputImageErrorMessage="Content image could not be rendered.",i.outputImageErrorMessage="Output image could not be rendered.",i.imageDiv=n.a.createRef(),i.inputImage=n.a.createRef(),i.outputImage=n.a.createRef(),i.handleMouseMove=i.handleMouseMove.bind(Object(u.a)(i)),i.handleSearchSubmit=i.handleSearchSubmit.bind(Object(u.a)(i)),i.handleTabChange=i.handleTabChange.bind(Object(u.a)(i)),i.sendData=i.sendData.bind(Object(u.a)(i)),i.setInputImageDimensions=i.setInputImageDimensions.bind(Object(u.a)(i)),i.setInitialImageXPosition=i.setInitialImageXPosition.bind(Object(u.a)(i)),i.setLoadingState=i.setLoadingState.bind(Object(u.a)(i)),i.verifyAndUpload=i.verifyAndUpload.bind(Object(u.a)(i)),i.toDataUrl=i.toDataUrl.bind(Object(u.a)(i)),i.searchTextUpdate=i.searchTextUpdate.bind(Object(u.a)(i)),i.displayErrorMessage=i.displayErrorMessage.bind(Object(u.a)(i)),i.setUploadedState=i.setUploadedState.bind(Object(u.a)(i)),i}return Object(h.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){var i,n=this;e.outputImage?e.outputImage!==this.props.outputImage&&(i=void 0===e.outputImageMimeType?a.getBase64ImageType(e.outputImage):e.outputImageMimeType,this.setState({displayModeTitle:e.displayModeTitle,outputImage:a.addBase64Header(i,e.outputImage),outputImageMimeType:i,outputImageName:e.outputImageName,mainState:"display",value:e.disableOutputTab?e.disableComparisonTab?3:5:4})):this.props.outputImage&&this.setState({mainState:"initial",value:this.props.disableUploadTab?this.props.disableUploadTab+this.props.disableUrlTab:0,searchText:null,errorMessage:null,displayError:!1,displayImageName:!1,inputImageData:null,mimeType:null,encoding:null,filename:null,base64Reader:void 0,byteReader:void 0,imageXPosition:void 0,dividerXPosition:this.props.width/2,displayModeTitle:this.props.displayModeTitle,outputImage:this.props.outputImage,outputImageName:this.props.outputImageName},(function(){return n.sendData(n.state.inputImageData)})),this.props.disableResetButton&&!e.disableResetButton&&this.setState({mainState:"initial",value:this.props.disableUploadTab?this.props.disableUploadTab+this.props.disableUrlTab:0,searchText:null,errorMessage:null,displayError:!1,displayImageName:!1,inputImageData:null,mimeType:null,encoding:null,filename:null,base64Reader:void 0,byteReader:void 0,imageXPosition:void 0,dividerXPosition:this.props.width/2,displayModeTitle:this.props.displayModeTitle,outputImage:this.props.outputImage,outputImageName:this.props.outputImageName},(function(){return n.sendData(n.state.inputImageData)}))}},{key:"setLoadingState",value:function(){this.setState({mainState:"loading"})}},{key:"sendData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.inputImageData,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.mimeType,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.encoding,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.state.filename;this.props.imageDataFunc(e,t,a,i)}},{key:"setUploadedState",value:function(e,t,a,i,n){var s=this;this.setState({mainState:"uploaded",searchText:null,inputImageData:e,mimeType:i,encoding:a,filename:n,displayError:!1,errorMessage:null},(function(){s.sendData(t)}))}},{key:"verifyAndUpload",value:function(e,t,a,i,n){if("url"===a)this.setUploadedState(e,t,a,i,n);else{if(.75*e.replace(/=/g,"").length>this.props.maxImageSize)return void this.displayErrorMessage(this.fileSizeError);if(this.props.allowedInputTypes.includes("image/*")){if(-1===i.indexOf("image"))return void this.displayErrorMessage(this.fileTypeError+"Got: "+i+".")}else if(!this.props.allowedInputTypes.includes(i))return void this.displayErrorMessage(this.fileTypeError+"Got: "+i+".");if(this.props.maxImageHeight||this.props.maxImageWidth){var s=new Image;s.crossOrigin="anonymous",s.setUploadedState=this.setUploadedState,s.displayErrorMessage=this.displayErrorMessage,s.imageData=e,s.sendData=t,s.encoding=a,s.mimeType=i,s.filename=n,s.maxImageWidth=this.props.maxImageWidth,s.maxImageHeight=this.props.maxImageHeight,s.onload=function(){this.maxImageHeight&&this.naturalHeight>this.maxImageHeight?this.displayErrorMessage("Maximum image height ("+this.maxImageHeight+"px) exceeded.  Got: "+this.naturalHeight+"px."):this.maxImageWidth&&this.naturalWidth>this.maxImageWidth?this.displayErrorMessage("Maximum image width ("+this.maxImageWidth+"px) exceeded.  Got: "+this.naturalWidth+"px."):this.setUploadedState(this.imageData,this.sendData,this.encoding,this.mimeType,this.filename)},s.src=e}else this.setUploadedState(e,t,a,i,n)}}},{key:"displayErrorMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"initial";this.setState({mainState:t,searchText:null,inputImageData:null,mimeType:null,encoding:null,filename:null,errorMessage:e,displayError:!0})}},{key:"byteReaderOnLoadEnd",value:function(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){this.verifyAndUpload(t.result,new Uint8Array(this.state.byteReader.result),"byteArray",e.type,e.name)}.bind(this)}},{key:"handleImageUpload",value:function(e,t){t.preventDefault(),t.stopPropagation(),this.setLoadingState();var a=e[0],i=new FileReader;i.onloadend=function(){var e=this;this.setState({base64Reader:i},(function(){e.verifyAndUpload(e.state.base64Reader.result,e.state.base64Reader.result.split(",")[1],"base64",a.type,a.name)}))}.bind(this);var n=new FileReader;n.onloadend=function(){this.setState({byteReader:n}),this.byteReaderOnLoadEnd(a)}.bind(this),this.props.returnByteArray?n.readAsArrayBuffer(a):i.readAsDataURL(a)}},{key:"renderUploadTab",value:function(){var e=this;return Object(Y.jsx)(y.a,{item:!0,xs:12,children:Object(Y.jsxs)(be.a,{onDrop:function(t,a){return e.handleImageUpload(t,a)},children:[Object(Y.jsx)("input",{id:"myInput",type:"file",style:{display:"none"},accept:this.props.allowedInputTypes,onChange:function(t){return e.handleImageUpload(t.target.files,t)},ref:function(t){return e.inputElement=t}}),Object(Y.jsx)("div",{onClick:function(){return e.inputElement.click()},style:{borderWidth:1,borderColor:"#d6d6d6",borderStyle:"dashed",borderRadius:4,cursor:"pointer",overflow:"hidden",height:this.tabHeight-this.dropzoneHeightOffset+10+"px",display:"flex",flexDirection:"column"},children:Object(Y.jsxs)(y.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{flexGrow:1,height:this.tabHeight+"px"},spacing:8,children:[Object(Y.jsx)(y.a,{item:!0,style:{padding:"0 40px"},children:Object(Y.jsx)(ae.a,{style:{fontSize:48,color:this.mainColor}})}),Object(Y.jsx)(y.a,{item:!0,style:{padding:"0 40px"},children:Object(Y.jsxs)(S.a,{style:{fontFamily:Re,fontVariantCaps:"normal",textTransform:"initial",fontSize:16,color:ke},children:["Drag and drop image here or",Object(Y.jsx)("span",{style:{color:this.mainColor},children:" click"})]})}),Object(Y.jsx)(y.a,{item:!0,style:{padding:"20px 40px"},children:Object(Y.jsxs)(S.a,{style:{width:"58%",margin:"0 auto",fontFamily:Re,fontVariantCaps:"normal",textTransform:"initial",fontSize:12,color:"#9b9b9b",textAlign:"center",padding:8},children:["(Image must be under ",this.props.maxImageSize/1e6,"mb. Source images are not saved on the servers after the job is processed.)"]})})]})})]})})}},{key:"toDataUrl",value:function(e,t){var a,i=e.substring(e.lastIndexOf("/")+1),n=new Image,s=this.verifyAndUpload,r=new FileReader;r.onloadend=function(){this.setState({byteReader:r}),this.verifyAndUpload(a,new Uint8Array(this.state.byteReader.result),"byteArray",this.props.outputFormat,i)}.bind(this),n.crossOrigin="anonymous",n.onerror=function(){this.displayErrorMessage(this.urlErrorMessage)}.bind(this),this.props.returnByteArray?(n.outputFormat=this.props.outputFormat,n.onload=function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.height=this.naturalHeight,e.width=this.naturalWidth,t.drawImage(this,0,0),a=e.toDataURL(this.outputFormat),e.toBlob((function(e){r.readAsArrayBuffer(e)}),this.outputFormat)}):n.onload=function(){var e,t=document.createElement("canvas"),a=t.getContext("2d");t.height=this.naturalHeight,t.width=this.naturalWidth,a.drawImage(this,0,0),e=t.toDataURL(this.outputFormat),s(e,e.split(",")[1],"base64",this.outputFormat,i)},n.src=e}},{key:"searchTextUpdate",value:function(e){this.setState({searchText:e.target.value},this.props.instantUrlFetch?this.handleSearchSubmit:null)}},{key:"handleSearchSubmit",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.setLoadingState(),t)e=t.url;else{if(null===this.state.searchText)return;e=this.state.searchText}this.props.allowURL?this.verifyAndUpload(e,e,"url",null,e.substring(e.lastIndexOf("/")+1)):this.toDataUrl(e,this.props.outputFormat)}},{key:"renderUrlTab",value:function(){var e=this;return Object(Y.jsx)(y.a,{container:!0,direction:"row",justify:"center",alignItems:"center",style:{height:this.tabHeight+"px",borderWidth:1,borderColor:"#d6d6d6",borderStyle:"dashed",borderRadius:4,cursor:"pointer",overflow:"hidden"},children:Object(Y.jsx)(y.a,{item:!0,xs:12,style:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:Object(Y.jsx)(f.a,{theme:this.theme,children:Object(Y.jsx)(ye.a,{style:{width:"80%",primary:this.mainColor,textAlign:"left"},variant:"outlined",type:"text",label:Object(Y.jsx)("span",{style:{fontWeight:"normal",fontSize:12},children:"Image URL"}),onChange:this.searchTextUpdate,InputProps:{endAdornment:Object(Y.jsx)(fe.a,{position:"end",children:Object(Y.jsx)(J.a,{style:{marginRight:0,padding:0,color:this.mainColor},onClick:null!==this.state.searchText?function(){return e.handleSearchSubmit(null)}:void 0,children:Object(Y.jsx)(je.a,{})})})}})})})})}},{key:"renderGalleryTab",value:function(){var e=this;return Object(Y.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden"},children:Object(Y.jsx)(ve.a,{cols:this.props.galleryCols,spacing:8,style:{width:"100%",height:this.tabHeight+"px"},children:this.props.imageGallery.map((function(t,a){return Object(Y.jsx)(ce.a,{in:2===e.state.value,style:{transformOrigin:"0 0 0"},timeout:500*a,children:Object(Y.jsx)(Ie.a,{children:Object(Y.jsx)("img",{src:t,alt:"Gallery Image "+a,onClick:function(){return e.handleSearchSubmit({url:t})},loading:"lazy"})},a)},a)}))})})}},{key:"renderLoadingState",value:function(){return Object(Y.jsx)("div",{style:this.tabStyle,children:Object(Y.jsx)(y.a,{container:!0,direction:"row",justify:"center",alignItems:"center",style:{flexGrow:1,height:this.tabHeight+"px"},children:Object(Y.jsx)(y.a,{item:!0,xs:12,style:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:Object(Y.jsx)(le.a,{in:"loading"===this.state.mainState,unmountOnExit:!0,children:Object(Y.jsx)(oe.a,{style:{color:this.mainColor,margin:10}})})})})})}},{key:"handleImageReset",value:function(){var e=this;this.setState({mainState:"initial",searchText:null,inputImageData:null,mimeType:null,encoding:null,filename:null,displayError:!1,errorMessage:null,displayImageName:!1},(function(){return e.sendData(e.state.inputImageData)}))}},{key:"renderUploadedState",value:function(){var e=this;return Object(Y.jsx)(le.a,{in:"uploaded"===this.state.mainState,children:Object(Y.jsxs)("div",{style:{position:"relative",overflow:"hidden",padding:8,height:this.tabHeight+"px",display:"flex",alignItems:"center",justifyContent:"space-around"},onMouseOver:function(){return e.setState({displayImageName:!0})},onMouseLeave:function(){return e.setState({displayImageName:!1})},children:[Object(Y.jsx)("img",{alt:"Service input",src:this.state.inputImageData,onError:function(){return e.displayErrorMessage(e.urlErrorMessage)},id:"loadedImage",style:this.props.displayProportionalImage?{maxHeight:this.tabHeight+"px",maxWidth:"100%"}:{height:this.tabHeight+"px",width:"100%"},loading:"lazy"}),Object(Y.jsx)(le.a,{in:this.state.displayImageName,children:Object(Y.jsx)(Oe.a,{title:Object(Y.jsxs)(S.a,{style:{display:"flex",justifyContent:"center",fontFamily:Re,fontVariantCaps:"normal",textTransform:"initial",color:Me,fontSize:14},children:[" ",this.state.filename," "]})})})]})})}},{key:"handleTabChange",value:function(e,t){this.setState({value:t})}},{key:"renderTabs",value:function(){var e=this;return Object(Y.jsxs)("div",{style:this.tabStyle,children:[Object(Y.jsxs)(ue.a,{axis:"x",index:this.state.value,children:[Object(Y.jsx)("div",{children:this.renderUploadTab()}),Object(Y.jsx)("div",{children:this.renderUrlTab()}),Object(Y.jsx)("div",{children:this.renderGalleryTab()}),Object(Y.jsx)("div",{children:"display"===this.state.mainState&&!this.props.disableInputTab&&this.renderInputImage()}),Object(Y.jsx)("div",{children:"display"===this.state.mainState&&!this.props.disableOutputTab&&this.renderOutputImage()}),Object(Y.jsx)("div",{children:"display"===this.state.mainState&&!this.props.disableComparisonTab&&this.renderComparison()})]}),Object(Y.jsx)(we.a,{onClickAway:function(){return e.setState({displayError:!1})},children:Object(Y.jsx)(Se.a,{style:{position:"absolute",width:"100%"},open:this.state.displayError,autoHideDuration:5e3,TransitionComponent:de.a,transitionDuration:300,onClose:function(){return e.setState({displayError:!1})},children:Object(Y.jsx)(Te.a,{style:{backgroundColor:De,margin:"2px",border:"2px solid",borderColor:Ue,borderRadius:"4px",padding:"2px",display:"flex",justifyContent:"space-around",flexGrow:1,width:"100%"},"aria-describedby":"client-snackbar",message:Object(Y.jsxs)("span",{style:{color:Ce,display:"flex",alignItems:"center",align:"center",justifyContent:"space-between"},children:[Object(Y.jsx)(te.a,{style:{fontSize:16,opacity:.9,marginRight:8}}),Object(Y.jsx)(S.a,{style:{fontFamily:Re,fontVariantCaps:"normal",textTransform:"initial",color:ke,fontSize:14},children:this.state.errorMessage})]})})})})]})}},{key:"renderInputImage",value:function(){var e=this;return Object(Y.jsx)(le.a,{in:"display"===this.state.mainState,children:Object(Y.jsxs)("div",{style:{position:"relative",overflow:"hidden",padding:8,height:this.tabHeight+"px",display:"flex",alignItems:"center",justifyContent:"space-around"},onMouseOver:function(){return e.setState({displayImageName:!0})},onMouseLeave:function(){return e.setState({displayImageName:!1})},children:[Object(Y.jsx)("img",{alt:"Service input",src:this.state.inputImageData,onError:function(){return e.displayErrorMessage(e.inputImageErrorMessage,"display")},id:"loadedImage",style:this.props.displayProportionalImage?{maxHeight:this.tabHeight+"px",maxWidth:"100%"}:{height:this.tabHeight+"px",width:"100%"},loading:"lazy"}),Object(Y.jsx)(le.a,{in:this.state.displayImageName,children:Object(Y.jsx)(Oe.a,{style:{},title:Object(Y.jsxs)(S.a,{style:{display:"flex",justifyContent:"center",alignText:"center",fontFamily:Re,fontVariantCaps:"normal",textTransform:"initial",color:Me,fontSize:14},children:[" ",this.state.filename," "]})})})]})})}},{key:"renderOutputImage",value:function(){var e=this;return Object(Y.jsx)(le.a,{in:"display"===this.state.mainState,children:Object(Y.jsxs)("div",{style:{position:"relative",overflow:"hidden",padding:8,height:this.tabHeight+"px",display:"flex",alignItems:"center",justifyContent:"space-around"},onMouseOver:function(){return e.setState({displayImageName:!0})},onMouseLeave:function(){return e.setState({displayImageName:!1})},children:[Object(Y.jsx)("img",{alt:"Service output",src:this.state.outputImage,onError:function(){return e.displayErrorMessage(e.outputImageErrorMessage,"display")},id:"loadedImage",style:this.props.displayProportionalImage?{maxHeight:this.tabHeight+"px",maxWidth:"100%"}:{height:this.tabHeight+"px",width:"100%"},loading:"lazy"}),null!==this.state.outputImageName?Object(Y.jsx)(le.a,{in:this.state.displayImageName,children:Object(Y.jsx)(Oe.a,{style:{},title:Object(Y.jsxs)(S.a,{style:{display:"flex",justifyContent:"center",alignText:"center",fontFamily:Re,fontVariantCaps:"normal",textTransform:"initial",color:Me,fontSize:14},children:[" ",this.state.outputImageName," "]})})}):Object(Y.jsx)(n.a.Fragment,{})]})})}},{key:"handleMouseMove",value:function(e){var t=this.imageDiv.current.getBoundingClientRect().left,a=this.outputImage.current.getBoundingClientRect().left;this.setState({imageXPosition:e.clientX-a,dividerXPosition:e.clientX-t})}},{key:"setInputImageDimensions",value:function(){this.setState({inputImageHeight:this.inputImage.current.clientHeight,inputImageWidth:this.inputImage.current.clientWidth})}},{key:"setInitialImageXPosition",value:function(){this.setState({imageXPosition:this.outputImage.current.clientWidth/2})}},{key:"renderComparison",value:function(){return Object(Y.jsx)(le.a,{in:"display"===this.state.mainState,children:Object(Y.jsxs)("div",{ref:this.imageDiv,id:"imageDiv",style:{position:"relative",overflow:"hidden",padding:8,width:"100%",height:this.tabHeight+"px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"ew-resize"},onMouseMove:this.handleMouseMove,children:[Object(Y.jsx)("img",{ref:this.inputImage,style:this.props.displayProportionalImage?{maxHeight:this.tabHeight+"px",maxWidth:"100%",align:"center",position:"relative"}:{height:this.tabHeight+"px",width:"100%",align:"center",position:"relative"},alt:"Service response...",src:this.state.inputImageData,onLoad:this.setInputImageDimensions,loading:"lazy"}),Object(Y.jsx)("img",{ref:this.outputImage,style:this.props.displayProportionalImage?{maxHeight:this.tabHeight+"px",maxWidth:"100%",align:"center",position:"absolute",clip:"rect(0px,"+this.state.imageXPosition+"px,10000px,0px)"}:{height:this.tabHeight+"px",width:"100%",align:"center",position:"absolute",clip:"rect(0px,"+this.state.imageXPosition+"px,10000px,0px)"},onLoad:this.setInitialImageXPosition,height:this.props.overlayInputImage&&this.state.inputImageHeight,width:this.props.overlayInputImage&&this.state.inputImageWidth,alt:"Service response...",src:this.state.outputImage,loading:"lazy"}),Object(Y.jsx)("div",{style:{position:"absolute",left:this.state.dividerXPosition-1.5+"px",borderLeft:"3px solid white",height:this.tabHeight}}),Object(Y.jsx)("div",{style:{position:"absolute",left:this.state.dividerXPosition-15+"px",top:this.tabHeight/2-15+"px",width:"30px",height:"30px",borderRadius:"15px",backgroundColor:"white"}}),Object(Y.jsx)(re.a,{style:{color:this.mainColor,width:"30px",height:"30px",position:"absolute",left:this.state.dividerXPosition-15+"px",top:this.tabHeight/2-15+"px",transform:"rotate(90deg)"}})]})})}},{key:"render",value:function(){return Object(Y.jsx)("div",{style:{width:this.props.width,minHeight:"264px",minWidth:"400px",position:"relative"},children:Object(Y.jsxs)(y.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",style:{color:"black",backgroundColor:"white"},spacing:0,children:[Object(Y.jsx)(y.a,{item:!0,xs:12,children:Object(Y.jsxs)(y.a,{container:!0,direction:"row",alignItems:"flex-end",justify:"space-around",style:{paddingBottom:5},children:[Object(Y.jsx)(y.a,{item:!0,xs:4,children:Object(Y.jsx)(S.a,{color:"inherit",noWrap:!0,variant:"h6",style:{fontSize:18,fontFamily:Re,padding:4},children:"display"===this.state.mainState?this.props.displayModeTitle:this.props.imageName})}),Object(Y.jsx)(y.a,{item:!0,xs:6,children:Object(Y.jsx)(f.a,{theme:this.theme,children:Object(Y.jsxs)(me.a,{value:this.state.value,onChange:this.handleTabChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth",style:{color:ke},TabIndicatorProps:{style:{bottom:8,backgroundColor:"#4086ff"}},children:["uploaded"!==this.state.mainState&&!("display"===this.state.mainState)&&!this.props.disableUploadTab&&Object(Y.jsx)(ge.a,{style:{marginRight:"0",minWidth:"fit-content",paddingBottom:0,flexGrow:0,flexBasis:0,paddingLeft:10},value:0,label:Object(Y.jsx)("span",{style:this.tabLabelStyle,children:"Upload"})}),"uploaded"!==this.state.mainState&&!("display"===this.state.mainState)&&!this.props.disableUrlTab&&Object(Y.jsx)(ge.a,{style:{marginRight:"0",minWidth:"fit-content",paddingBottom:0,flexGrow:0,flexBasis:0,paddingLeft:10},value:1,label:Object(Y.jsx)("span",{style:this.tabLabelStyle,children:"URL"})}),"uploaded"!==this.state.mainState&&!("display"===this.state.mainState)&&this.props.imageGallery.length>0&&Object(Y.jsx)(ge.a,{style:{marginRight:"0",minWidth:"fit-content",paddingBottom:0,flexGrow:0,flexBasis:0,paddingLeft:10},value:2,label:Object(Y.jsx)("span",{style:this.tabLabelStyle,children:"Gallery"})}),"display"===this.state.mainState&&!this.props.disableInputTab&&Object(Y.jsx)(ge.a,{style:{marginRight:"0",minWidth:"fit-content",paddingBottom:0,flexGrow:0,flexBasis:0},value:3,label:Object(Y.jsx)("span",{style:this.tabLabelStyle,children:this.props.inputTabTitle})}),"display"===this.state.mainState&&!this.props.disableOutputTab&&Object(Y.jsx)(ge.a,{style:{minWidth:"5%"},value:4,label:Object(Y.jsx)("span",{style:this.tabLabelStyle,children:this.props.outputTabTitle})}),"display"===this.state.mainState&&!this.props.disableComparisonTab&&Object(Y.jsx)(ge.a,{style:{minWidth:"5%"},value:5,label:Object(Y.jsx)("span",{style:this.tabLabelStyle,children:this.props.comparisonTabTitle})})]})})}),Object(Y.jsx)(y.a,{item:!0,xs:1,style:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:this.props.infoTip.length>0&&Object(Y.jsx)(K.a,{title:Object(Y.jsx)(S.a,{style:{fontFamily:Re,fontSize:12,color:"white"},children:this.props.infoTip}),children:Object(Y.jsx)(I.a,{style:{fontSize:20,color:ke}})})}),Object(Y.jsxs)(y.a,{item:!0,xs:1,style:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:["uploaded"===this.state.mainState&&!this.props.disableResetButton&&Object(Y.jsx)(le.a,{in:"uploaded"===this.state.mainState,children:Object(Y.jsx)(K.a,{title:Object(Y.jsx)(S.a,{style:{fontFamily:Re,fontSize:12,color:"white"},children:"Click to reset!"}),children:Object(Y.jsx)(J.a,{onClick:this.handleImageReset.bind(this),children:Object(Y.jsx)($.a,{style:{fontSize:20,color:this.mainColor}})})})}),"display"===this.state.mainState&&!this.props.disableDownloadButton&&Object(Y.jsx)(le.a,{in:"display"===this.state.mainState,children:Object(Y.jsx)(K.a,{title:Object(Y.jsx)(S.a,{style:{fontFamily:Re,fontSize:12,color:"white"},children:"Download output image"}),children:Object(Y.jsx)("a",{href:this.state.outputImage,download:this.state.outputImageName,children:Object(Y.jsx)(J.a,{children:Object(Y.jsx)(ne.a,{style:{fontSize:20,color:this.mainColor}})})})})})]})]})}),Object(Y.jsx)(y.a,{item:!0,xs:12,style:{backgroundColor:Me},children:("initial"===this.state.mainState||"display"===this.state.mainState)&&this.renderTabs()||"loading"===this.state.mainState&&this.renderLoadingState()||"uploaded"===this.state.mainState&&this.renderUploadedState()})]})})}}],[{key:"getBase64ImageType",value:function(e){return"/"===e.charAt(0)?"image/jpeg":"R"===e.charAt(0)?"image/gif":"i"===e.charAt(0)?"image/png":"application/octet-stream"}},{key:"addBase64Header",value:function(e,t){return"data:"+e+";base64,"+t}},{key:"prepareBase64Image",value:function(e){var t=a.getBase64ImageType(e);return a.addBase64Header(t,e)}}]),a}(n.a.Component);He.defaultProps={width:"500px",tabHeight:300,imageName:"Content Image",disableUploadTab:!1,disableUrlTab:!1,disableResetButton:!1,returnByteArray:!1,outputFormat:"image/png",allowedInputTypes:["image/png","image/jpeg","image/jpg"],maxImageSize:1e7,maxImageWidth:null,maxImageHeight:null,displayProportionalImage:!0,allowURL:!1,instantUrlFetch:!1,imageGallery:[],galleryCols:3,infoTip:"",mainColor:x.a,displayModeTitle:"Result",outputImage:"",outputImageMimeType:void 0,outputImageName:"service-output",disableInputTab:!1,disableOutputTab:!1,disableComparisonTab:!1,disableDownloadButton:!1,overlayInputImage:!0,inputTabTitle:"Input",outputTabTitle:"Output",comparisonTabTitle:"Comparison"};var ze={content:"",style:"",contentSize:640,styleSize:640,preserveColor:!1,alpha:1,crop:!1,saveExt:""},Ee=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).setup=Object(d.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:if(!e.sent){e.next=8;break}return e.next=6,D();case 6:t=e.sent,i.setState({useAlgoSigner:!0,accounts:t});case 8:case"end":return e.stop()}}),e)}))),i.runService=Object(d.a)(c.a.mark((function e(){var t,a,n,s,r,o,l,d,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=i.state,a=t.useAlgoSigner,n=t.accounts,s=t.content,r=t.style,!a||!n.length){e.next=21;break}return o={from:n[0].address,to:"JTEAQYLZW22LQUB2AOQXGG2SQM3K7FWABHFKKF24GLP5EGEZ5YVYJSFKDY",amount:1e4,note:"AlgorandStyleTransfer"},i.setState({processingTx:!0}),e.next=7,E(o);case 7:return l=e.sent,e.next=10,B(l);case 10:return d=e.sent,e.next=13,A(d);case 13:if(!e.sent){e.next=19;break}return e.next=17,_(s,r);case 17:(p=e.sent)&&p.data&&i.setState({isComplete:!0,response:p.data.output});case 19:e.next=22;break;case 21:alert("AlgoSigner not installed!\nhttps://www.purestake.com/technology/algosigner/");case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.error(e.t0);case 27:i.setState({processingTx:!1});case 28:case"end":return e.stop()}}),e,null,[[0,24]])}))),i.state=Object(o.a)(Object(o.a)({},ze),{},{useAlgoSigner:!1,accounts:[],processingTx:!1,isComplete:!1,response:void 0}),i.mainFont="Muli",i.mainFontSize=14,i.users_guide="https://github.com/03303/algo-style-transfer-dapp",i.code_repo="https://github.com/03303/algo-style-transfer-dapp",i.reference="https://www.tensorflow.org/tutorials/generative/style_transfer",i.styleGallery=["https://raw.githubusercontent.com/dxyang/StyleTransfer/master/style_imgs/mosaic.jpg","https://raw.githubusercontent.com/ShafeenTejani/fast-style-transfer/master/examples/dora-maar-picasso.jpg","https://raw.githubusercontent.com/singnet/style-transfer-service/master/docs/assets/input/style/brushstrokes.jpg","https://raw.githubusercontent.com/singnet/style-transfer-service/master/docs/assets/examples/impronte_d_artista_cropped.jpg","https://raw.githubusercontent.com/singnet/style-transfer-service/master/docs/assets/examples/woman_with_hat_matisse_cropped.jpg","https://raw.githubusercontent.com/singnet/style-transfer-service/master/docs/assets/examples/sketch_cropped.png","https://raw.githubusercontent.com/singnet/style-transfer-service/master/docs/assets/examples/ashville_cropped.jpg","https://raw.githubusercontent.com/singnet/style-transfer-service/master/docs/assets/examples/goeritz_cropped.jpg","https://raw.githubusercontent.com/singnet/style-transfer-service/master/docs/assets/examples/en_campo_gris_cropped.jpg"],i.runService=i.runService.bind(Object(u.a)(i)),i.canBeInvoked=i.canBeInvoked.bind(Object(u.a)(i)),i.reset=i.reset.bind(Object(u.a)(i)),i.getContentImageData=i.getContentImageData.bind(Object(u.a)(i)),i.getStyleImageData=i.getStyleImageData.bind(Object(u.a)(i)),i.theme=Object(O.a)({palette:{primary:x.a,secondary:w.a},typography:{useNextVariants:!0},overrides:{MuiIconButton:{colorPrimary:x.a[500],colorSecondary:w.a[500]},MuiSvgIcon:{colorPrimary:C.a[500],colorSecondary:w.a[500]}}}),i}return Object(h.a)(a,[{key:"parseResponse",value:function(){var e=this.state.response;return"undefined"!==typeof e?"string"===typeof e?e:e.data:null}},{key:"getContentImageData",value:function(e){this.setState({content:e})}},{key:"getStyleImageData",value:function(e){this.setState({style:e})}},{key:"reset",value:function(){this.setState({isComplete:!1,processingTx:!1,content:"",style:"",response:void 0})}},{key:"canBeInvoked",value:function(){return this.state.content&&this.state.style&&!this.state.processingTx}},{key:"componentDidMount",value:function(){var e=Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setup();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isComplete,a=e.processingTx;return Object(Y.jsx)("div",{style:{flexGrow:1},children:Object(Y.jsx)(y.a,{item:!0,container:!0,justify:"center",style:{padding:8},children:Object(Y.jsx)(T.a,{style:{padding:16,margin:"auto",width:"100%",maxWidth:550},children:Object(Y.jsxs)(f.a,{theme:this.theme,children:[Object(Y.jsxs)(y.a,{container:!0,spacing:0,justify:"center",alignItems:"center",children:[Object(Y.jsxs)(y.a,{item:!0,xs:12,container:!0,alignItems:"center",justify:"space-between",children:[Object(Y.jsx)(y.a,{item:!0,children:Object(Y.jsx)(S.a,{style:{fontFamily:this.mainFont,fontSize:4*this.mainFontSize/3},children:"Algorand Style Transfer"})}),Object(Y.jsxs)(y.a,{item:!0,xs:!0,container:!0,justify:"flex-end",children:[Object(Y.jsx)(y.a,{item:!0,children:Object(Y.jsx)(Z,{text:"View code on Github",href:this.code_repo,children:Object(Y.jsx)(j.a,{children:Object(Y.jsx)("path",{d:"M12.007 0C6.12 0 1.1 4.27.157 10.08c-.944 5.813 2.468 11.45 8.054 13.312.19.064.397.033.555-.084.16-.117.25-.304.244-.5v-2.042c-3.33.735-4.037-1.56-4.037-1.56-.22-.726-.694-1.35-1.334-1.756-1.096-.75.074-.735.074-.735.773.103 1.454.557 1.846 1.23.694 1.21 2.23 1.638 3.45.96.056-.61.327-1.178.766-1.605-2.67-.3-5.462-1.335-5.462-6.002-.02-1.193.42-2.35 1.23-3.226-.327-1.015-.27-2.116.166-3.09 0 0 1.006-.33 3.3 1.23 1.966-.538 4.04-.538 6.003 0 2.295-1.5 3.3-1.23 3.3-1.23.445 1.006.49 2.144.12 3.18.81.877 1.25 2.033 1.23 3.226 0 4.607-2.805 5.627-5.476 5.927.578.583.88 1.386.825 2.206v3.29c-.005.2.092.393.26.507.164.115.377.14.565.063 5.568-1.88 8.956-7.514 8.007-13.313C22.892 4.267 17.884.007 12.008 0z"})})})}),Object(Y.jsx)(y.a,{item:!0,children:Object(Y.jsx)(Z,{text:"User's guide",href:this.users_guide,children:Object(Y.jsx)(I.a,{})})}),Object(Y.jsx)(y.a,{item:!0,children:Object(Y.jsx)(Z,{text:"View original project",href:this.reference,children:Object(Y.jsx)(j.a,{children:Object(Y.jsx)("path",{d:"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm0 11.701c0 2.857-1.869 4.779-4.5 5.299l-.498-1.063c1.219-.459 2.001-1.822 2.001-2.929h-2.003v-5.008h5v3.701zm6 0c0 2.857-1.869 4.779-4.5 5.299l-.498-1.063c1.219-.459 2.001-1.822 2.001-2.929h-2.003v-5.008h5v3.701z"})})})})]})]}),Object(Y.jsx)(y.a,{item:!0,xs:12,container:!0,justify:"center",children:Object(Y.jsx)(He,{style:{align:"center"},maxImageSize:3e6,maxImageWidth:2400,maxImageHeight:1800,imageDataFunc:this.getContentImageData,imageName:"Input",outputImage:this.parseResponse(),outputImageName:"stylizedImage",width:"90%",instantUrlFetch:!0,allowURL:!0})}),!t&&Object(Y.jsx)(y.a,{item:!0,xs:12,container:!0,justify:"center",children:Object(Y.jsx)(He,{imageDataFunc:this.getStyleImageData,imageName:"Style",maxImageSize:3e6,maxImageWidth:2400,maxImageHeight:1800,disableResetButton:t,width:"90%",instantUrlFetch:!0,allowURL:!0,imageGallery:this.styleGallery})})]}),!t&&Object(Y.jsx)(y.a,{item:!0,container:!0,justify:"center",style:{paddingTop:16},children:Object(Y.jsx)(y.a,{item:!0,children:Object(Y.jsx)(b.a,{variant:"contained",size:"medium",color:"primary",style:{fontSize:"13px",marginLeft:"10px"},onClick:this.runService,disabled:!this.canBeInvoked(),children:a?"Please Wait":"Run"})})}),t&&Object(Y.jsx)(y.a,{item:!0,container:!0,justify:"center",style:{paddingTop:16},children:Object(Y.jsx)(y.a,{item:!0,children:Object(Y.jsx)(b.a,{variant:"contained",size:"medium",color:"primary",style:{fontSize:"13px",marginLeft:"10px"},onClick:this.reset,children:"Reset"})})})]})})})})}}]),a}(n.a.Component);var Fe=function(){return Object(Y.jsx)("div",{className:"App",children:Object(Y.jsx)(Ee,{})})},Be=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,230)).then((function(t){var a=t.getCLS,i=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),i(e),n(e),s(e),r(e)}))};r.a.render(Object(Y.jsx)(n.a.StrictMode,{children:Object(Y.jsx)(Fe,{})}),document.getElementById("root")),Be()}},[[163,1,2]]]);
//# sourceMappingURL=main.60dff4c0.chunk.js.map